(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c794d8f"],{"0821":function(t,e,n){},5958:function(t,e,n){"use strict";var a=n("f5f5"),o=n.n(a);o.a},"5d70":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"accounts"},[n("b-card",[n("div",[n("b-btn",{staticClass:"mb-3",attrs:{variant:"primary"},on:{click:t.addAccount}},[n("i",{staticClass:"fa fa-plus fa-lg mr-1"}),t._v("\n        "+t._s(t.$t("add_account"))+"\n      ")]),n("b-btn",{staticClass:"pull-right",attrs:{size:"sm"},on:{click:t.fetch}},[n("i",{staticClass:"fa fa-refresh fa-lg",class:{rotate:t.busy}})])],1),n("b-form",{staticClass:"mb-4",attrs:{inline:""}},[n("div",{staticClass:"mr-2"},[t._v(t._s(t.$t("filter"))+":")]),n("b-form-input",{attrs:{type:"text",placeholder:t.$t("name")},model:{value:t.filter.name,callback:function(e){t.$set(t.filter,"name",e)},expression:"filter.name"}})],1),n("b-table",{attrs:{items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,"sort-by":t.sortBy,striped:!0,filter:t.filterHandler,responsive:"",fixed:"",hover:""},on:{"update:sortBy":function(e){t.sortBy=e},"row-clicked":t.rowClicked},scopedSlots:t._u([{key:"enabled",fn:function(e){return[t._v("\n        "+t._s(e.value?t.$t("yes"):t.$t("no"))+"\n      ")]}},{key:"actions",fn:function(e){return[n("b-btn",{attrs:{size:"sm",variant:"primary"},on:{click:function(n){n.stopPropagation(),t.editAccount(e.item)}}},[n("i",{staticClass:"fa fa-pencil fa-lg"})])]}}])}),n("nav",[n("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,"prev-text":t.$t("prev_short"),"next-text":t.$t("next_short"),"hide-goto-end-buttons":""},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1),n("edit-account",{attrs:{account:t.editAccountData}})],1)},o=[],s=(n("7f7f"),n("cadf"),n("551c"),n("097d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:"editAccount",title:t.title,"ok-title":t.$t("save"),"cancel-title":t.$t("cancel")},on:{shown:t.shown,ok:t.ok,hidden:t.hidden}},[n("b-form",{on:{submit:t.submit,reset:t.reset}},[n("b-form-group",{attrs:{label:t.$t("name")+":"}},[n("b-form-input",{attrs:{type:"text"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("b-form-group",{attrs:{label:t.$t("expired_at")+":"}},[n("datepicker",{staticStyle:{width:"200px"},attrs:{format:"yyyy-MM-dd"},model:{value:t.expiredAtDate,callback:function(e){t.expiredAtDate=e},expression:"expiredAtDate"}})],1),n("b-form-group",{attrs:{label:t.$t("devices_amount")+":"}},[n("b-form-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1),n("b-form-group",{attrs:{label:t.$t("blocked")+":"}},[n("b-form-checkbox",{attrs:{value:"false","unchecked-value":"true"},model:{value:t.form.enabled,callback:function(e){t.$set(t.form,"enabled",e)},expression:"form.enabled"}})],1),t.error?n("span",{staticClass:"text-danger"},[t._v(t._s(t.error))]):t._e()],1)],1)}),i=[],r=(n("f751"),n("a026")),c=(n("bc3a"),n("fa33")),l={props:{id:{type:String,default:"editAccount"},account:{type:Object,default:null}},components:{Datepicker:c["a"]},data:function(){return{form:{name:null,expiredAt:null,amount:0,enabled:!0},expiredAtDate:null,error:null}},computed:{title:function(){return this.account?this.$t("edit_account"):this.$t("add_account")}},methods:{shown:function(){this.account&&(Object.assign(this.form,this.account),this.expiredAtDate=this.account.expiredAt)},ok:function(t){t.preventDefault(),this.submit()},hidden:function(){this.reset()},submit:function(){var t=this;this.error=null,this.form.expiredAt=r["default"].moment(this.expiredAtDate).format("YYYY-MM-DD"),this.sendForm().then(function(){t.$store.dispatch("account/fetch"),t.$refs.modal.hide()},function(e){return t.error=e.response.data.message})},sendForm:function(){return this.account?this.$store.dispatch("account/edit",this.form):this.$store.dispatch("account/add",this.form)},reset:function(){Object.assign(this.$data,this.$options.data())}}},u=l,d=(n("5958"),n("2877")),f=Object(d["a"])(u,s,i,!1,null,null,null);f.options.__file="EditAccount.vue";var m=f.exports,p={name:"Accounts",components:{EditAccount:m},data:function(){return{fields:[{key:"id",label:"ID",sortable:!0},{key:"name",label:this.$t("name"),sortable:!0},{key:"amount",label:this.$t("devices_amount"),sortable:!0},{key:"expiredAt",label:this.$t("expired_at"),sortable:!0},{key:"enabled",label:this.$t("enabled"),sortable:!0},{key:"actions",label:this.$t("actions")}],perPage:50,currentPage:1,sortBy:"id",editAccountData:null,busy:!1,filter:{name:null}}},created:function(){this.fetch()},computed:{items:function(){return this.$store.getters["account/list"]},totalRows:function(){return this.getRowCount()}},methods:{fetch:function(){var t=this;this.busy=!0,this.$store.dispatch("account/fetch").then(function(){t.busy=!1},function(e){t.$notify(e.response.data.message,"error"),t.busy=!1})},getRowCount:function(){return this.items.length},addAccount:function(){this.editAccountData=null,this.$root.$emit("bv::show::modal","editAccount")},editAccount:function(t){this.editAccountData=t,this.$root.$emit("bv::show::modal","editAccount")},filterHandler:function(t){return this.filter.name?t?t.name.substr(0,this.filter.name.length).toLowerCase()==this.filter.name.toLowerCase():null:t},rowClicked:function(t){this.$router.push({name:"Users",params:{account_id:t.id}})}}},h=p,b=(n("a1eb"),Object(d["a"])(h,a,o,!1,null,null,null));b.options.__file="Accounts.vue";e["default"]=b.exports},a1eb:function(t,e,n){"use strict";var a=n("0821"),o=n.n(a);o.a},f5f5:function(t,e,n){}}]);
//# sourceMappingURL=chunk-4c794d8f.ebde91d0.js.map